webpackJsonp([1],{"8D7r":function(t,e){},E3C9:function(t,e){},FIGc:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={};n.d(a,"userLogin",function(){return T}),n.d(a,"getTodolist",function(){return C}),n.d(a,"editTodo",function(){return L}),n.d(a,"addTodo",function(){return R}),n.d(a,"delTodo",function(){return D}),n.d(a,"register",function(){return I}),n.d(a,"logout",function(){return E});var o=n("7+uW"),s={name:"App",data:function(){return{}},methods:{logoutHandler:function(){var t=this;this.$http.logout().then(function(e){console.log(e),200===e.code&&(t.$router.push({name:"Login"}),localStorage.removeItem("access_token"),localStorage.removeItem("name"))}).catch(function(t){console.log(t)})}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[t._v("小清单\n      "),t._v(" "),n("button",{staticClass:"logout-btn",on:{click:t.logoutHandler}},[t._v("退出")])]),t._v(" "),n("el-main",[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{xs:20,span:12}},[n("div",{staticClass:"grid-content"},[n("router-view")],1)])],1)],1),t._v(" "),n("el-footer",[t._v(" 友情链接："),n("el-link",{attrs:{href:"https://www.cnblogs.com/chengkanghua",target:"_blank",type:"primary"}},[t._v("博客园")]),t._v(" "),n("el-link",{attrs:{href:"http://www.chengkanghua.top",target:"_blank",type:"primary"}},[t._v("程康华的博客")]),t._v(" "),n("el-link",{attrs:{href:"https://www.liwenzhou.com/",target:"_blank",type:"primary"}},[t._v("李文周的博客")])],1)],1)},staticRenderFns:[]};var i=n("VU/8")(s,r,!1,function(t){n("FIGc")},"data-v-50c70a73",null).exports,l=n("/ocq"),c={name:"Login",data:function(){return{name:"",password:""}},methods:{loginHandler:function(){var t=this,e={name:this.name,password:this.password};console.log(e),this.$http.userLogin(e).then(function(n){if(console.log(n),t.$message(n.msg),0===n.code){t.$router.push({name:"todolist"}),localStorage.setItem("access_token",n.data),localStorage.setItem("name",e.name)}}).catch(function(t){console.log(t)})}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_box"},[n("div",{staticClass:"inp"},[n("el-input",{attrs:{placeholder:"用户名",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("p"),t._v(" "),n("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:t.loginHandler}},[t._v("登录")]),t._v(" "),n("p",{staticClass:"go_register"},[t._v("没有账号 "),n("el-button",[n("router-link",{attrs:{to:{name:"Register"}}},[t._v("立刻注册")])],1)],1)],1)])},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(t){n("E3C9")},"data-v-655ab984",null).exports,p={name:"TodoList",data:function(){return{tableData:[],newTitle:""}},mounted:function(){},methods:{tableRowClassName:function(t){return t.row.status?"success-row":""},getTodoList:function(){var t=this;this.$http.getTodolist().then(function(e){t.tableData=e.data})},handleEdit:function(t,e){var n=this,a=e.status?" 置为未完成":" 置为已完成",o={id:e.ID,status:!e.status};this.$http.editTodo(o).then(function(){n.tableData[t].status=!e.status,n.$message({showClose:!0,duration:1500,message:"<"+e.title+"> "+a,type:"success"})})},handleDelete:function(t,e){var n=this,a=e.ID;this.$http.delTodo(a).then(function(){n.tableData.splice(t,1),n.$message({showClose:!0,duration:1500,message:"删除待办事项成功",type:"success"})})},handleAdd:function(){var t=this;if(""!=this.newTitle){var e={title:this.newTitle};this.$http.addTodo(e).then(function(){t.getTodoList(),t.$message({showClose:!0,duration:1500,message:"添加待办事项成功",type:"success"})}),this.newTitle=""}else this.$message({showClose:!0,duration:1500,message:"title不能为空哦",type:"warning"})}},created:function(){var t=this;window.localStorage.getItem("access_token","")||this.$router.push({name:"Login"}),this.$http.getTodolist().then(function(e){t.tableData=e.data})}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:2}},[n("el-input",{attrs:{size:"",placeholder:"请输入待办事项..."},model:{value:t.newTitle,callback:function(e){t.newTitle=e},expression:"newTitle"}})],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.handleAdd}})],1)],1),t._v(" "),n("el-divider"),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"待办事项",prop:"title"}}),t._v(" "),n("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.row.status,expression:"!scope.row.status"}],attrs:{type:"success",icon:"el-icon-check",circle:""},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}}),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.row.status,expression:"scope.row.status"}],attrs:{type:"warning",icon:"el-icon-refresh-left",circle:""},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}}),t._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:""},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)],1)},staticRenderFns:[]};var f=n("VU/8")(p,h,!1,function(t){n("8D7r")},"data-v-5763cae0",null).exports,g={name:"Login",data:function(){return{name:"",password:""}},methods:{registerHandler:function(){var t=this,e={name:this.name,password:this.password};this.$http.register(e).then(function(e){console.log(e),0===e.code?t.$router.push({name:"Login"}):t.$message(e.msg)}).catch(function(t){console.log(t)})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_box"},[n("div",{staticClass:"inp"},[n("el-input",{attrs:{placeholder:"用户名",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("p"),t._v(" "),n("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:t.registerHandler}},[t._v("注册")])],1)])},staticRenderFns:[]};var v=n("VU/8")(g,m,!1,function(t){n("Rvgo")},"data-v-80834a4a",null).exports;o.default.use(l.a);var w=new l.a({linkActiveClass:"is-active",mode:"history",routes:[{path:"/",redirect:"Login"},{path:"/register",name:"Register",component:v},{path:"/login",name:"Login",component:d},{path:"/todolist",name:"todolist",component:f}]}),_=n("zL8q"),b=n.n(_),k=(n("tvR6"),n("Z8K1"),n("//Fk")),y=n.n(k),$=n("mtWM"),x=n.n($);x.a.defaults.baseURL="http://121.5.37.237:8999/",x.a.interceptors.request.use(function(t){return localStorage.getItem("access_token")&&(t.headers.Authorization="Bearer "+localStorage.getItem("access_token"),console.log(t)),t},function(t){return y.a.reject(t)});var T=function(t){return x.a.post("login",t).then(function(t){return t.data})},C=function(){return x.a.get("api/v1/todo").then(function(t){return t.data})},L=function(t){return x.a.put("api/v1/todo",t).then(function(t){return t.data})},R=function(t){return x.a.post("api/v1/todo",t).then(function(t){return t.data})},D=function(t){return x.a.delete("api/v1/todo/"+t).then(function(t){return t.data})},I=function(t){return x.a.post("register",t).then(function(t){return t.data})},E=function(){return x.a.post("logout").then(function(t){return t.data})};o.default.use(b.a),o.default.prototype.$http=a,o.default.config.productionTip=!1,new o.default({el:"#app",router:w,components:{App:i},template:"<App/>"})},Rvgo:function(t,e){},Z8K1:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5a651974fd19c821dcb6.js.map